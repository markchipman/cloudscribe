
## IdentityServer4 2.0

https://leastprivilege.com/2017/10/06/identityserver4-v2/
https://github.com/IdentityServer/IdentityServer4/releases/tag/2.0.0

previous problem was EndPoint is internal, now public so endpoints can be replaced?
https://github.com/IdentityServer/IdentityServer4/issues/1514
http://www.cloudidentity.com/blog/2014/08/26/the-common-endpoint-walks-like-a-tenant-talks-like-a-tenant-but-is-not-a-tenant/

https://github.com/IdentityServer/IdentityServer4/issues/1364
Do we want to allow our endpoints to be replaced? e.g. /authorize, etc?
I think the outcome of our conversation was "no" that's not something we're trying to design for.

https://github.com/IdentityServer/IdentityServer4/pull/1576



https://leastprivilege.com/2016/12/16/identity-vs-permissions/

https://identityserver4.readthedocs.io/en/release/topics/federation_gateway.html

https://brockallen.com/2017/08/30/beware-in-asp-net-core-2-0-claims-transformation-might-run-multiple-times/


http://stackoverflow.com/questions/41682434/how-to-put-asp-net-identity-roles-into-the-identityserver4-identity-token

https://stackoverflow.com/questions/41687659/how-to-add-additional-claims-to-be-included-in-the-access-token-using-asp-net-id

https://damienbod.com/2016/02/14/authorization-policies-and-data-protection-with-identityserver4-in-asp-net-core/


https://blogs.msdn.microsoft.com/webdev/2017/01/23/asp-net-core-authentication-with-identityserver4/


https://www.scottbrady91.com/Identity-Server/Getting-Started-with-IdentityServer-4


https://identityserver4.readthedocs.io/en/dev/intro/big_picture.html

https://identityserver4.readthedocs.io/en/dev/quickstarts/6_aspnet_identity.html

http://andrewlock.net/an-introduction-to-openid-connect-in-asp-net-core/

https://blogs.msdn.microsoft.com/webdev/2016/09/19/introducing-identityserver4-for-authentication-and-access-control-in-asp-net-core/

https://identityserver4.readthedocs.io/en/dev/quickstarts/0_overview.html

http://stackoverflow.com/questions/27677345/what-are-a-security-token-and-security-stamp-in-asp-net-identity

http://www.dotnetcurry.com/aspnet/1223/secure-aspnet-web-api-using-tokens-owin-angularjs

http://stackoverflow.com/questions/29048122/token-based-authentication-in-asp-net-5-vnext
http://stackoverflow.com/questions/34612631/prevent-token-based-authorization-of-preflight-options-requests-in-asp-net-5-vn

https://github.com/mrsheepuk/ASPNETSelfCreatedTokenAuthExample

https://github.com/IdentityModel/oidc-client-js
https://github.com/IdentityModel/oidc-client-js/wiki

OpenID Connect Basic Client Implementer's Guide
https://openid.net/specs/openid-connect-basic-1_0.html

https://nat.sakimura.org/2014/12/10/making-a-javascript-openid-connect-client/
https://github.com/GluuFederation/openid-implicit-client


http://www.simplecloud.info/
System for Cross-domain Identity Management
SCIM 2, the open API for managing identities is now complete and published under the IETF.

http://damienbod.com/2015/11/08/oauth2-implicit-flow-with-angular-and-asp-net-5-identity-server/

https://leastprivilege.com/2016/09/13/new-in-identityserver4-clients-without-secrets/


http://bitoftech.net/2015/03/31/asp-net-web-api-claims-authorization-with-asp-net-identity-2-1/

http://www.asp.net/identity/overview/migrations/migrating-an-existing-website-from-sql-membership-to-aspnet-identity

https://aspnetidentity.codeplex.com/workitem/2333


http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx

http://msdn.microsoft.com/en-us/library/microsoft.aspnet.identity%28v=vs.108%29.aspx

http://stackoverflow.com/questions/19487322/what-is-asp-net-identitys-iusersecuritystampstoretuser-interface

http://blogs.msdn.com/b/webdev/archive/2014/02/12/per-request-lifetime-management-for-usermanager-class-in-asp-net-identity.aspx

http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx

http://msdn.microsoft.com/en-us/library/microsoft.aspnet.identity%28v=vs.108%29.aspx

http://stackoverflow.com/questions/19487322/what-is-asp-net-identitys-iusersecuritystampstoretuser-interface

http://brockallen.com/2013/10/20/the-good-the-bad-and-the-ugly-of-asp-net-identity/

http://brockallen.com/2014/02/11/introducing-identityreboot/
https://github.com/brockallen/BrockAllen.IdentityReboot

http://brockallen.com/2014/02/09/how-membershipreboot-stores-passwords-properly/

http://brockallen.com/2014/02/10/how-membershipreboot-mitigates-login-and-two-factor-authentication-brute-force-attacks/

http://brockallen.com/2014/02/11/concerns-with-two-factor-authentication-in-asp-net-identity-v2/

https://github.com/IdentityServer/Thinktecture.IdentityServer3

http://identityserver.github.io/Documentation/docs/

## OIDC js Client
https://github.com/IdentityModel/oidc-client-js/wiki
https://mderriey.github.io/2016/08/21/openid-connect-and-js-applications-with-oidc-client-js/
https://identityserver.github.io/Documentation/docsv2/overview/jsGettingStarted.html

## OIDC and Xamarin

https://leastprivilege.com/2016/06/01/identitymodel-openid-connect-oauth-2-0-client-library-for-mobilenative-applications/
https://github.com/IdentityModel/IdentityModel.OidcClient.Samples

https://leastprivilege.com/2016/01/17/which-openid-connectoauth-2-o-flow-is-the-right-one/

https://stackoverflow.com/questions/41687800/connecting-xamarin-client-to-identity-server4

https://developer.xamarin.com/guides/xamarin-forms/cloud-services/authentication/oauth/
these are for old version of identityserver
https://github.com/KevinDockx/XamarinFormsOIDCSample



https://wildermuth.com/2017/08/19/Two-AuthorizationSchemes-in-ASP-NET-Core-2

## Signing Certificates

https://msdn.microsoft.com/library/windows/desktop/aa386968.aspx



https://brockallen.com/2015/06/01/makecert-and-creating-ssl-or-signing-certificates/

https://blogs.msdn.microsoft.com/webdev/2016/10/27/bearer-token-authentication-in-asp-net-core/

https://blogs.msdn.microsoft.com/webdev/2017/01/23/asp-net-core-authentication-with-identityserver4/

http://amilspage.com/signing-certificates-idsv4/

services.AddTransient<ICorsPolicyService, IdServerCorsPolicy>();
services.AddTransient<IRedirectUriValidator, IdServerRedirectValidator>();

var certPath = Configuration.GetValue<string>("AppSettings:KeyFilePath");
var certPwd = Configuration.GetValue<string>("AppSettings:KeyFilePassword");
//var store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
//X509Certificate2 cert =null;
//store.Open(OpenFlags.ReadOnly);
//var certificates = store.Certificates.Find(X509FindType.FindByIssuerName, issuer, true);
//if(certificates.Count > 0) { cert = certificates[0]; }
//var issuer = Configuration.GetValue<string>("appsettings:KeyStoreIssuer");


var cert = new X509Certificate2(
	File.ReadAllBytes(certPath), 
	certPwd,
	X509KeyStorageFlags.MachineKeySet |
	X509KeyStorageFlags.PersistKeySet |
	X509KeyStorageFlags.Exportable);
	
services.AddIdentityServerConfiguredForCloudscribe()
	.AddCloudscribeCoreEFIdentityServerStorageMSSQL(connectionString)
	.AddCloudscribeIdentityServerIntegrationMvc()
	// don't use AddDeveloperSigningCredential in production
	// https://identityserver4.readthedocs.io/en/dev/topics/crypto.html
	// https://identityserver4.readthedocs.io/en/dev/topics/startup.html#refstartupkeymaterial
	// you can use a self signed cert, you could but should not use your ssl certificate
	// https://github.com/IdentityServer/IdentityServer3/issues/2888
	//.AddSigningCredential(cert)
	.AddSigningCredential(cert);


 